{{define "content"}}
<section>
  <h2>Clients</h2>
  <form method="post" action="/clients/check-expired" style="display:flex; gap:1rem; align-items:center">
    <a href="/clients/new">+ Add client</a>
    <input type="hidden" name="csrf" value="{{.CSRF}}" />
    <button type="submit" class="secondary">Check expired</button>
  </form>
  {{if .Clients}}
  <div class="table-responsive">
  <table>
    <thead><tr><th>Name</th><th>Expires</th><th>Actions</th></tr></thead>
    <tbody>
      {{range .Clients}}
      <tr>
        <td class="mono">{{.Name}}</td>
        <td>{{if .Expires}}{{.Expires}}{{else}}â€”{{end}}</td>
        <td>
          <div class="actions">
          <a href="/clients/config?name={{.Name}}" aria-label="Download config for {{.Name}}">Download</a>
          <a href="/clients/qr?name={{.Name}}" aria-label="View QR for {{.Name}}">QR</a>
          <form method="post" action="/clients/revoke" onsubmit="return confirm('Revoke {{.Name}}?')">
            <input type="hidden" name="csrf" value="{{$.CSRF}}" />
            <input type="hidden" name="name" value="{{.Name}}" />
            <button type="submit" class="secondary">Revoke</button>
          </form>
          </div>
        </td>
      </tr>
      {{end}}
    </tbody>
  </table>
  </div>
  {{else}}
    <p>No clients yet.</p>
  {{end}}
</section>
{{end}}
{{template "layout" .}}
